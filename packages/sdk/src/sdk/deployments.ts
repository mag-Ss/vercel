/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { deploymentsCancel } from "../funcs/deploymentsCancel.js";
import { deploymentsCreate } from "../funcs/deploymentsCreate.js";
import { deploymentsDelete } from "../funcs/deploymentsDelete.js";
import { deploymentsGet } from "../funcs/deploymentsGet.js";
import {
  deploymentsGetEvents,
  GetEventsAcceptEnum,
} from "../funcs/deploymentsGetEvents.js";
import { deploymentsGetFileContents } from "../funcs/deploymentsGetFileContents.js";
import { deploymentsList } from "../funcs/deploymentsList.js";
import { deploymentsListAliases } from "../funcs/deploymentsListAliases.js";
import { deploymentsListFiles } from "../funcs/deploymentsListFiles.js";
import { deploymentsUploadFile } from "../funcs/deploymentsUploadFile.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import { FileTree } from "../models/components/filetree.js";
import {
  CancelDeploymentRequest,
  CancelDeploymentResponseBody,
} from "../models/operations/canceldeployment.js";
import {
  CreateDeploymentRequest,
  CreateDeploymentResponseBody,
} from "../models/operations/createdeployment.js";
import {
  DeleteDeploymentRequest,
  DeleteDeploymentResponseBody,
} from "../models/operations/deletedeployment.js";
import {
  GetDeploymentRequest,
  GetDeploymentResponseBody,
} from "../models/operations/getdeployment.js";
import {
  GetDeploymentEventsRequest,
  GetDeploymentEventsResponse,
} from "../models/operations/getdeploymentevents.js";
import { GetDeploymentFileContentsRequest } from "../models/operations/getdeploymentfilecontents.js";
import {
  GetDeploymentsRequest,
  GetDeploymentsResponse,
} from "../models/operations/getdeployments.js";
import {
  ListDeploymentAliasesRequest,
  ListDeploymentAliasesResponseBody,
} from "../models/operations/listdeploymentaliases.js";
import { ListDeploymentFilesRequest } from "../models/operations/listdeploymentfiles.js";
import {
  UploadFileRequest,
  UploadFileResponseBody,
} from "../models/operations/uploadfile.js";
import { unwrapAsync } from "../types/fp.js";
import { PageIterator, unwrapResultIterator } from "../types/operations.js";

export { GetEventsAcceptEnum } from "../funcs/deploymentsGetEvents.js";

export class Deployments extends ClientSDK {
  /**
   * Get deployment events
   *
   * @remarks
   * Get the build logs of a deployment by deployment ID and build ID. It can work as an infinite stream of logs or as a JSON endpoint depending on the input parameters.
   */
  async getEvents(
    request: GetDeploymentEventsRequest,
    options?: RequestOptions & { acceptHeaderOverride?: GetEventsAcceptEnum },
  ): Promise<GetDeploymentEventsResponse> {
    return unwrapAsync(deploymentsGetEvents(
      this,
      request,
      options,
    ));
  }

  /**
   * Get a deployment by ID or URL
   *
   * @remarks
   * Retrieves information for a deployment either by supplying its ID (`id` property) or Hostname (`url` property). Additional details will be included when the authenticated user or team is an owner of the deployment.
   */
  async get(
    request: GetDeploymentRequest,
    options?: RequestOptions,
  ): Promise<GetDeploymentResponseBody> {
    return unwrapAsync(deploymentsGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Create a new deployment
   *
   * @remarks
   * Create a new deployment with all the required and intended data. If the deployment is not a git deployment, all files must be provided with the request, either referenced or inlined. Additionally, a deployment id can be specified to redeploy a previous deployment.
   */
  async create(
    request: CreateDeploymentRequest,
    options?: RequestOptions,
  ): Promise<CreateDeploymentResponseBody> {
    return unwrapAsync(deploymentsCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * Cancel a deployment
   *
   * @remarks
   * This endpoint allows you to cancel a deployment which is currently building, by supplying its `id` in the URL.
   */
  async cancel(
    request: CancelDeploymentRequest,
    options?: RequestOptions,
  ): Promise<CancelDeploymentResponseBody> {
    return unwrapAsync(deploymentsCancel(
      this,
      request,
      options,
    ));
  }

  /**
   * Upload Deployment Files
   *
   * @remarks
   * Before you create a deployment you need to upload the required files for that deployment. To do it, you need to first upload each file to this endpoint. Once that's completed, you can create a new deployment with the uploaded files. The file content must be placed inside the body of the request. In the case of a successful response you'll receive a status code 200 with an empty body.
   */
  async uploadFile(
    request: UploadFileRequest,
    options?: RequestOptions,
  ): Promise<UploadFileResponseBody> {
    return unwrapAsync(deploymentsUploadFile(
      this,
      request,
      options,
    ));
  }

  /**
   * List Deployment Aliases
   *
   * @remarks
   * Retrieves all Aliases for the Deployment with the given ID. The authenticated user or team must own the deployment.
   */
  async listAliases(
    request: ListDeploymentAliasesRequest,
    options?: RequestOptions,
  ): Promise<ListDeploymentAliasesResponseBody> {
    return unwrapAsync(deploymentsListAliases(
      this,
      request,
      options,
    ));
  }

  /**
   * List Deployment Files
   *
   * @remarks
   * Allows to retrieve the file structure of a deployment by supplying the deployment unique identifier.
   */
  async listFiles(
    request: ListDeploymentFilesRequest,
    options?: RequestOptions,
  ): Promise<Array<FileTree>> {
    return unwrapAsync(deploymentsListFiles(
      this,
      request,
      options,
    ));
  }

  /**
   * Get Deployment File Contents
   *
   * @remarks
   * Allows to retrieve the content of a file by supplying the file identifier and the deployment unique identifier. The response body will contain a JSON response containing the contents of the file encoded as base64.
   */
  async getFileContents(
    request: GetDeploymentFileContentsRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(deploymentsGetFileContents(
      this,
      request,
      options,
    ));
  }

  /**
   * List deployments
   *
   * @remarks
   * List deployments under the authenticated user or team. If a deployment hasn't finished uploading (is incomplete), the `url` property will have a value of `null`.
   */
  async list(
    request: GetDeploymentsRequest,
    options?: RequestOptions,
  ): Promise<PageIterator<GetDeploymentsResponse>> {
    return unwrapResultIterator(deploymentsList(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete a Deployment
   *
   * @remarks
   * This API allows you to delete a deployment, either by supplying its `id` in the URL or the `url` of the deployment as a query parameter. You can obtain the ID, for example, by listing all deployments.
   */
  async delete(
    request: DeleteDeploymentRequest,
    options?: RequestOptions,
  ): Promise<DeleteDeploymentResponseBody> {
    return unwrapAsync(deploymentsDelete(
      this,
      request,
      options,
    ));
  }
}
